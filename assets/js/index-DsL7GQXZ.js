import{C as ce,r as be,i as Ee}from"./vendor-common-nuPr2OCY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const de="62fa32c094715186239c67b0c3fd6133",le="https://api.openweathermap.org/data/2.5/";async function ue(e){try{const t=await fetch(`${le}weather?q=${e}&appid=${de}&units=metric`);if(!t.ok)throw t.status===404?new Error(`City not found: ${e}`):new Error(`Failed to fetch weather data: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching weather data:",t),t}}async function Se(e){try{const t=await fetch(`${le}forecast?q=${e}&appid=${de}&units=metric`);if(!t.ok)throw t.status===404?new Error(`City not found for forecast: ${e}`):new Error(`Failed to fetch 5-day forecast data: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching 5-day forecast:",t),t}}const Ce="50678696-ed6f097088bf5690dd98584b9",xe="https://pixabay.com/api/",Ie=["tank","war","danger","military","army","battle"];async function Te(e){try{const t=await fetch(`${xe}?key=${Ce}&q=${e}&image_type=photo&orientation=horizontal&min_width=1280&min_height=720`);if(!t.ok)throw new Error(`Failed to fetch background image from Pixabay: ${t.statusText}`);const n=await t.json();if(n.hits&&n.hits.length>0){const r=n.hits.filter(o=>!Ie.some(s=>o.tags.toLowerCase().split(",").map(c=>c.trim()).includes(s)));if(r.length>0){const o=Math.floor(Math.random()*r.length);return r[o].largeImageURL}else return null}else return null}catch(t){return console.error(t),null}}const ke="https://corsproxy.io/?",Me="https://api.forismatic.com/api/1.0/";function De(e,t=77){let n=0,r="";for(let o of e){if(o!==" "&&n++,n>t)break;r+=o}return n>t&&(r=r.trimEnd()+"..."),r}async function $e(){try{const t=await(await fetch(ke+encodeURIComponent(Me),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({method:"getQuote",format:"json",lang:"en"})})).text();if(!t)throw new Error("Empty response from Forismatic API.");const n=JSON.parse(t);return n.quoteText&&n.quoteAuthor?{text:`“${De(n.quoteText)}”`,author:n.quoteAuthor||"Unknown"}:(console.warn("Invalid quote data received from Forismatic:",n),null)}catch(e){return console.error("Error fetching quote from Forismatic API:",e),{text:"“Who cares about the clouds when we`re together? Just sing a song and bring the sunny weather.”",author:"Steve Jobs"}}}const M="/weather-app/assets/icons-B5UIjEs_.svg";ce.register(...be);const qe=document.querySelector(".current-weather .location"),Be=document.querySelector(".current-weather .temperature"),We=document.querySelector(".current-weather .min-temp"),_e=document.querySelector(".current-weather .max-temp"),Ae=document.querySelector(".weather-icon"),Fe=document.querySelector(".date-time-info .date"),Oe=document.querySelector(".date-time-info .month"),He=document.querySelector(".sun-times .sunrise"),Pe=document.querySelector(".sun-times .sunset");let R=null;const ne=document.getElementById("quote-text"),oe=document.getElementById("quote-author"),Ue={"01d":"img/icon/sun-weather.png","01n":"img/icon/01n.png","02d":"img/icon/010-clouds-and-sun.png","02n":"img/icon/010-clouds-and-sun.png","03d":"img/icon/cloudy.png","03n":"img/icon/cloudy.png","04d":"img/icon/cloudy.png","04n":"img/icon/cloudy.png","09d":"img/icon/09d.png","09n":"img/icon/09n.png","10d":"img/icon/rain.png","10n":"img/icon/rain.png","11d":"img/icon/storm.png","11n":"img/icon/storm.png","13d":"img/icon/snow.png","13n":"img/icon/snow.png","50d":"img/icon/fog.png","50n":"img/icon/fog.png"};function j(e){return`<img src="${Ue[e]||"img/icon/default.png"}" width="48" height="48" alt="weather icon">`}function Re(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function Ve(e,t){qe.textContent=`${e.name}, ${e.sys.country}`,Be.textContent=`${Math.round(e.main.temp)}°`,We.textContent=`${Math.round(e.main.temp_min)}°`,_e.textContent=`${Math.round(e.main.temp_max)}°`;const n=e.weather[0].icon;Ae.innerHTML=j(n);const r=new Date,o=r.getDate(),s=Re(o),c=r.toLocaleDateString("en-US",{weekday:"short"});Fe.innerHTML=`${o}<sup>${s}</sup> <span class="day-of-week">${c}</span>`;const l=r.toLocaleDateString("en-US",{month:"long"});Oe.textContent=l;const i=new Date(e.sys.sunrise*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"}),d=new Date(e.sys.sunset*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"});He.innerHTML=`<svg width="24" height="24"><use href="${M}#sunrise"></use></svg>${i}`,Pe.innerHTML=`<svg width="24" height="24"><use href="${M}#sunset"></use></svg>${d}`}async function J(e){const t=await Te(e);t?(document.body.style.setProperty("--bg-image",`url('${t}')`),document.querySelector(".weather-app").style.backgroundImage=`url('${t}')`):(document.body.style.setProperty("--bg-image","none"),document.querySelector(".weather-app").style.backgroundImage="none")}function H(e,t,n){const r=document.getElementById("city-tags-container"),o=document.getElementById("city-tags-toggle");Array.from(r.querySelectorAll(".city-tag")).forEach(l=>l.remove()),(!r.classList.contains("expanded")&&e.length>4?e.slice(0,4):e).forEach(l=>{const i=document.createElement("span");i.classList.add("city-tag"),i.textContent=l,i.addEventListener("click",()=>t(l));const d=document.createElement("span");d.classList.add("close-tag"),d.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L11 11M1 11L11 1" stroke="white" stroke-opacity="0.5" stroke-width="1.5" /></svg>',d.addEventListener("click",a=>{a.stopPropagation(),n(l)}),i.appendChild(d),r.insertBefore(i,o)}),o&&(e.length>4?(o.classList.remove("hidden"),o.onclick=()=>{r.classList.toggle("expanded"),H(e,t,n)}):(o.classList.add("hidden"),r.classList.remove("expanded")))}function B(e,t){Ee[t]({message:e,position:"topRight",timeout:3e3,progressBar:!1,theme:"dark",backgroundColor:t==="error"?"#dc3545":t==="success"?"#28a745":"#ffc107",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff"})}async function z(){const e=await $e();e?(ne.textContent=e.text,oe.textContent=e.author):(ne.textContent="“The only way to do great work is to love what you do.”",oe.textContent="Steve Jobs")}function me(e){const t={};return e.list.forEach(n=>{const r=n.dt_txt.split(" ")[0];t[r]||(t[r]=[]),t[r].push(n)}),t}function he(e){return Object.keys(e).map(t=>{const n=e[t];if(!n||n.length===0)return null;const r=Math.min(...n.map(a=>a.main.temp_min)),o=Math.max(...n.map(a=>a.main.temp_max)),s=n.reduce((a,u)=>a+u.main.temp,0)/n.length,c=n.reduce((a,u)=>a+u.main.humidity,0)/n.length,l=n.reduce((a,u)=>a+u.wind.speed,0)/n.length,i=n.reduce((a,u)=>a+u.main.pressure,0)/n.length,d=n.find(a=>a.dt_txt.includes("12:00:00"))||n[0];return{date:new Date(t),temp_min:Math.round(r),temp_max:Math.round(o),icon:d.weather[0].icon,avg_temp:parseFloat(s.toFixed(1)),avg_humidity:Math.round(c),avg_wind_speed:parseFloat(l.toFixed(1)),avg_pressure:Math.round(i*.750062)}}).filter(Boolean).slice(0,5)}function Ne(e){const t=document.querySelector(".five-day-forecast-container"),n=document.getElementById("forecast-header-city");if(!t||!n)return;n.textContent=`${e.city.name}, ${e.city.country}`;const r=me(e),o=he(r),s=Object.keys(r).slice(0,5);t.innerHTML="",o.forEach((c,l)=>{const i=c.date.toLocaleDateString("en-US",{weekday:"long"}),d=c.date.toLocaleDateString("en-US",{day:"numeric",month:"short"}),a=document.createElement("div");a.classList.add("forecast-card"),a.innerHTML=`
      <p class="forecast-day-of-week">${i}</p>
      <p class="forecast-date">${d}</p>
      <div class="forecast-icon">
        ${j(c.icon)}
      </div>
      <div class="forecast-min-max">
        <div>
          <p class="label">min</p>
          <p class="temp-value">${c.temp_min}°</p>
        </div>
        <span class="minmax-divider">
                <svg width="1" height="40">
                  <use href="${M}#vertical-line"></use>
                </svg>
        </span>
        <div>
          <p class="label">max</p>
          <p class="temp-value">${c.temp_max}°</p>
        </div>
      </div>
      <a class="forecast-more-info">more info</a>
    `;const u=a.querySelector(".forecast-more-info"),m=s[l];if(u&&r[m]){u.dataset.dayData=JSON.stringify(r[m]);const T=c.date.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short"});u.dataset.dateString=T}t.appendChild(a)})}function fe(e){const t=me(e),n=he(t),r=n.map(m=>m.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),o={temp:{label:"Temperature, C°",data:n.map(m=>m.avg_temp),borderColor:"#ff6b09",backgroundColor:"#ff6b09",tension:.4},humidity:{label:"Humidity, %",data:n.map(m=>m.avg_humidity),borderColor:"#0000ff",backgroundColor:"#0000ff",tension:.4},wind:{label:"Wind Speed, m/s",data:n.map(m=>m.avg_wind_speed),borderColor:"#e0e024",backgroundColor:"#e0e024",tension:.4},pressure:{label:"Atmosphere Pressure, m/m",data:n.map(m=>m.avg_pressure),borderColor:"#00ff00",backgroundColor:"#00ff00",tension:.4}},c=document.getElementById("chart-legend").querySelectorAll('input[type="checkbox"]:checked'),l=Array.from(c).map(m=>o[m.value]),d=document.getElementById("weather-chart").getContext("2d");R&&R.destroy();const a=window.innerWidth<=767,u={responsive:!0,maintainAspectRatio:!1,scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.54)",font:{size:14,weight:"400"}},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"rgba(255, 255, 255, 0.54)",font:{size:14,weight:"400"}},grid:{color:"rgba(255, 255, 255, 0.1)"},title:{display:!a,text:"Value of Indicators",color:"rgba(255, 255, 255, 0.7)"}}},plugins:{legend:{display:!1}},elements:{point:{radius:4,hoverRadius:6}}};R=new ce(d,{type:"line",data:{labels:r,datasets:l},options:u})}function Xe(e){const t=document.getElementById("hourly-forecast-container"),n=t.querySelector(".hourly-forecast-cards-wrapper");if(!t||!n)return;const r=s=>Math.round(s*.750062),o=e.map(s=>{const c=new Date(s.dt*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),l=j(s.weather[0].icon),i=`${Math.round(s.main.temp)}°`,d=r(s.main.pressure),a=s.main.humidity,u=s.wind.speed.toFixed(1);return`
        <div class="hourly-card">
          <p class="hourly-time">${c}</p>
          <div class="hourly-icon">${l}</div>
          <p class="hourly-temp">${i}</p>
          <div class="hourly-details">
            <div class="hourly-details-item">
              <svg><use href="${M}#barometer"></use></svg> 
              <span>${d} mm</span>
            </div>
            <div class="hourly-details-item">
              <svg><use href="${M}#humidity"></use></svg>
              <span>${a}%</span>
            </div>
            <div class="hourly-details-item">
              <svg><use href="${M}#wind"></use></svg>
              <span>${u} m/s</span>
            </div>
          </div>
        </div>
      `}).join("");n.innerHTML=o,n.scrollLeft=0,t.classList.remove("hidden")}function W(){const e=document.getElementById("hourly-forecast-container");if(e){e.classList.add("hidden");const t=e.querySelector(".hourly-forecast-cards-wrapper");t&&(t.innerHTML="")}}const I=document.querySelector(".weather-app"),V=document.getElementById("city-input"),je=document.getElementById("add-city-button"),ge=document.getElementById("loader"),w=document.getElementById("today-view-container"),C=document.getElementById("five-day-view-container"),K=document.getElementById("today-tab-today-view"),_=document.getElementById("5-days-tab-today-view"),Y=document.getElementById("today-tab-five-day-view"),Q=document.getElementById("5-days-tab-five-day-view"),y=document.getElementById("show-chart-container"),re=document.getElementById("show-chart-link"),x=document.getElementById("chart-section"),se=document.getElementById("hide-chart-link"),ae=document.getElementById("chart-legend"),ie=document.querySelector(".forecast-main-section");let h=JSON.parse(localStorage.getItem("weatherCities"))||["Kyiv"],p=h[0]||"Kyiv",A=null,D=!1;function N(e){const{wrapperSelector:t,scrollbarId:n,thumbId:r,scrollbarVisibleWidth:o}=e,s=document.getElementById(n),c=document.getElementById(r),l=document.querySelector(t);if(!s||!c||!l)return;if(s.dataset.customScrollbarInitialized==="true"){setTimeout(a,0);return}s.dataset.customScrollbarInitialized="true";let i=!1,d=0;function a(){if(!l||!c||!s)return;const v=l.scrollWidth,L=l.clientWidth;if(v<=L){s.classList.add("hidden");return}s.classList.remove("hidden");const b=32,g=L/v*o,E=Math.max(g,b),S=o-E;let f=0;v-L>0&&(f=l.scrollLeft/(v-L)*S),f=Math.max(0,Math.min(f,S)),c.setAttribute("x1",String(f)),c.setAttribute("x2",String(f+E))}const u=v=>{v.preventDefault();const L=s.getBoundingClientRect(),b=v.clientX-L.left,g=parseFloat(c.getAttribute("x1"))||0,E=(parseFloat(c.getAttribute("x2"))||0)-g;if(b>=g&&b<=g+E)i=!0,d=b-g,document.body.style.userSelect="none";else{const S=l.scrollWidth,f=l.clientWidth;if(S<=f)return;const P=32,$=f/S*o,k=Math.max($,P),q=o-k;let U=b-k/2;U=Math.max(0,Math.min(U,q));const Le=q>0?U/q:0;l.scrollLeft=Le*(S-f),a()}},m=v=>{if(!i)return;const L=s.getBoundingClientRect(),b=v.clientX-L.left,g=l.scrollWidth,E=l.clientWidth;if(g<=E)return;const S=32,f=E/g*o,P=Math.max(f,S),$=o-P;let k=b-d;k=Math.max(0,Math.min(k,$));const q=$>0?k/$:0;l.scrollLeft=q*(g-E)},T=()=>{i&&(i=!1,document.body.style.userSelect="")};s.addEventListener("mousedown",u),document.addEventListener("mousemove",m),document.addEventListener("mouseup",T),l.addEventListener("scroll",a),window.addEventListener("resize",a),setTimeout(a,500)}function G(){ge.classList.remove("hidden")}function Z(){ge.classList.add("hidden")}async function F(e,t=!1){t&&I&&I.classList.remove("loaded"),G();try{const n=await ue(e);n&&Ve(n,e),t&&I&&(I.offsetHeight,I.classList.add("loaded"))}catch(n){console.error(n)}finally{Z()}}async function pe(e){G();try{const t=await Se(e);t&&(A=t,Ne(t),y&&y.classList.remove("hidden"))}catch{B(`Не вдалося отримати прогноз для міста ${e}.`,"error")}finally{Z()}}function ee(){if(!D){if(!w.classList.contains("hidden")){F(p,!0);return}D=!0,I.classList.remove("five-day-layout-active"),K.classList.add("active"),_.classList.remove("active"),Y.classList.add("active"),Q.classList.remove("active"),C.classList.add("view-transition-out"),C.addEventListener("animationend",()=>{C.classList.add("hidden"),C.classList.remove("view-transition-out"),w.classList.remove("hidden"),w.classList.add("view-transition-in"),w.addEventListener("animationend",()=>{w.classList.remove("view-transition-in"),D=!1},{once:!0})},{once:!0}),W(),x&&x.classList.add("hidden"),y&&y.classList.add("hidden"),ie&&ie.classList.remove("hidden"),F(p,!1)}}function ye(){D||_.classList.contains("active")||(D=!0,I.classList.add("five-day-layout-active"),K.classList.remove("active"),_.classList.add("active"),Y.classList.remove("active"),Q.classList.add("active"),w.classList.add("view-transition-out"),w.addEventListener("animationend",()=>{w.classList.add("hidden"),w.classList.remove("view-transition-out"),C.classList.remove("hidden"),C.classList.add("view-transition-in"),C.addEventListener("animationend",()=>{C.classList.remove("view-transition-in"),D=!1},{once:!0})},{once:!0}),pe(p))}function Je(){if(!A){B("Будь ласка, зачекайте завантаження даних прогнозу.","info");return}y&&y.classList.add("hidden"),W(),x&&x.classList.remove("hidden"),fe(A),window.innerWidth<=767&&N({wrapperSelector:"#chart-wrapper",scrollbarId:"chart-custom-scrollbar",thumbId:"chart-scrollbar-thumb",scrollbarVisibleWidth:250})}function X(){x&&x.classList.add("hidden"),y&&y.classList.remove("hidden")}function O(e){p=e,J(e),z(),W(),_.classList.contains("active")?(X(),pe(e)):F(e,!0)}function ve(){const e=V.value.trim();if(!e||e.split(" ").join("").length===0){B("Поле вводу міста не може бути порожнім.","error");return}if(h.some(t=>t.toLowerCase()===e.toLowerCase())){B("Це місто вже додано.","warning");return}h.length>=5&&h.shift(),G(),ue(e).then(t=>{t&&(J(e),h.push(e),localStorage.setItem("weatherCities",JSON.stringify(h)),H(h,O,te),V.value="",p=e,z(),ee())}).catch(t=>{B(t.message.includes("City not found")?`Місто "${e}" не знайдено.`:`Сталася помилка: ${t.message}`,"error")}).finally(Z)}function te(e){h=h.filter(t=>t.toLowerCase()!==e.toLowerCase()),localStorage.setItem("weatherCities",JSON.stringify(h)),H(h,O,te),p.toLowerCase()===e.toLowerCase()&&(p=h.length>0?h[0]:"Kyiv",O(p))}K.addEventListener("click",ee);Y.addEventListener("click",ee);_.addEventListener("click",ye);Q.addEventListener("click",ye);je.addEventListener("click",ve);V.addEventListener("keypress",e=>{e.key==="Enter"&&ve()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".date-time-info .time");H(h,O,te),J(p),F(p,!0),z(),e&&setInterval(()=>{const i=new Date;e.textContent=i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"})},1e3);const t=document.querySelector(".forecast-scroll-arrow.left"),n=document.querySelector(".forecast-scroll-arrow.right"),r=document.querySelector(".five-day-forecast-container");t&&t.addEventListener("click",()=>o("left")),n&&n.addEventListener("click",()=>o("right"));function o(i){if(!r)return;const d=r.querySelector(".forecast-card");if(!d)return;const a=d.offsetWidth+10;r.scrollBy({left:i==="left"?-a:a,behavior:"smooth"})}const s=document.querySelector(".five-day-forecast-container");let c=null;function l(){if(c){c.classList.remove("active");const i=c.closest(".forecast-card");if(i){i.classList.remove("active");const d=i.querySelector(".forecast-day-of-week");d&&d.classList.remove("active")}c=null}}if(s&&s.addEventListener("click",i=>{const d=i.target.closest(".forecast-more-info");if(!d)return;i.preventDefault(),X();const a=d.closest(".forecast-card");if(c===d){W(),l();return}l(),d.classList.add("active"),a&&(a.classList.add("active"),a.querySelector(".forecast-day-of-week").classList.add("active")),c=d;const u=JSON.parse(d.dataset.dayData);Xe(u,d.dataset.dateString),window.innerWidth<=1279&&setTimeout(()=>{N({wrapperSelector:"#hourly-forecast-container .hourly-forecast-cards-wrapper",scrollbarId:"hourly-custom-scrollbar",thumbId:"hourly-scrollbar-thumb",scrollbarVisibleWidth:248})},0)}),re&&re.addEventListener("click",i=>{i.preventDefault(),W(),l(),Je(),N({wrapperSelector:"#chart-wrapper",scrollbarId:"chart-custom-scrollbar",thumbId:"chart-scrollbar-thumb",scrollbarVisibleWidth:250})}),se&&se.addEventListener("click",i=>{i.preventDefault(),l(),X()}),ae){const i=ae.querySelectorAll('input[type="checkbox"]'),d=()=>{i.forEach(a=>{const u=a.closest(".chart-legend-item");u&&(a.checked?u.classList.remove("disabled"):u.classList.add("disabled"))})};i.forEach(a=>{a.addEventListener("change",u=>{const m=u.target;if(!m.checked){m.checked=!0;return}i.forEach(T=>{T!==m&&(T.checked=!1)}),d(),A&&x&&x.style.display!=="none"&&fe(A)})}),d()}y&&y.classList.add("hidden")});function we(){const e=document.getElementById("forecast-header-city"),t=document.querySelector(".five-day-forecast-wrapper"),n=document.querySelector(".five-day-header");!e||!t||!n||(window.innerWidth<=767?t.firstElementChild!==e&&t.insertBefore(e,t.firstChild):n.contains(e)||n.insertBefore(e,n.firstChild))}window.addEventListener("DOMContentLoaded",we);window.addEventListener("resize",we);
