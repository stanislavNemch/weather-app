import{C as re,r as be,i as Le}from"./vendor-common-nuPr2OCY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const se="62fa32c094715186239c67b0c3fd6133",ae="https://api.openweathermap.org/data/2.5/";async function ie(e){try{const t=await fetch(`${ae}weather?q=${e}&appid=${se}&units=metric`);if(!t.ok)throw t.status===404?new Error(`City not found: ${e}`):new Error(`Failed to fetch weather data: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching weather data:",t),t}}async function Ee(e){try{const t=await fetch(`${ae}forecast?q=${e}&appid=${se}&units=metric`);if(!t.ok)throw t.status===404?new Error(`City not found for forecast: ${e}`):new Error(`Failed to fetch 5-day forecast data: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching 5-day forecast:",t),t}}const Se="50678696-ed6f097088bf5690dd98584b9",Ce="https://pixabay.com/api/",xe=["tank","war","danger","military","army","battle"];async function Ie(e){try{const t=await fetch(`${Ce}?key=${Se}&q=${e}&image_type=photo&orientation=horizontal&min_width=1280&min_height=720`);if(!t.ok)throw new Error(`Failed to fetch background image from Pixabay: ${t.statusText}`);const n=await t.json();if(n.hits&&n.hits.length>0){const r=n.hits.filter(o=>!xe.some(s=>o.tags.toLowerCase().split(",").map(c=>c.trim()).includes(s)));if(r.length>0){const o=Math.floor(Math.random()*r.length);return r[o].largeImageURL}else return null}else return null}catch(t){return console.error(t),null}}const Te="https://corsproxy.io/?",ke="https://api.forismatic.com/api/1.0/";function Me(e,t=77){let n=0,r="";for(let o of e){if(o!==" "&&n++,n>t)break;r+=o}return n>t&&(r=r.trimEnd()+"..."),r}async function De(){try{const t=await(await fetch(Te+encodeURIComponent(ke),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({method:"getQuote",format:"json",lang:"en"})})).text();if(!t)throw new Error("Empty response from Forismatic API.");const n=JSON.parse(t);return n.quoteText&&n.quoteAuthor?{text:`“${Me(n.quoteText)}”`,author:n.quoteAuthor||"Unknown"}:(console.warn("Invalid quote data received from Forismatic:",n),null)}catch(e){return console.error("Error fetching quote from Forismatic API:",e),{text:"“Who cares about the clouds when we`re together? Just sing a song and bring the sunny weather.”",author:"Steve Jobs"}}}const I="/weather-app/assets/icons-B5UIjEs_.svg";re.register(...be);const $e=document.querySelector(".current-weather .location"),qe=document.querySelector(".current-weather .temperature"),Be=document.querySelector(".current-weather .min-temp"),We=document.querySelector(".current-weather .max-temp"),_e=document.querySelector(".weather-icon"),Ae=document.querySelector(".date-time-info .date"),Fe=document.querySelector(".date-time-info .month"),Oe=document.querySelector(".sun-times .sunrise"),Pe=document.querySelector(".sun-times .sunset");let O=null;const G=document.getElementById("quote-text"),Z=document.getElementById("quote-author"),Ue={"01d":"img/icon/sun-weather.png","01n":"img/icon/01n.png","02d":"img/icon/010-clouds-and-sun.png","02n":"img/icon/010-clouds-and-sun.png","03d":"img/icon/cloudy.png","03n":"img/icon/cloudy.png","04d":"img/icon/cloudy.png","04n":"img/icon/cloudy.png","09d":"img/icon/09d.png","09n":"img/icon/09n.png","10d":"img/icon/rain.png","10n":"img/icon/rain.png","11d":"img/icon/storm.png","11n":"img/icon/storm.png","13d":"img/icon/snow.png","13n":"img/icon/snow.png","50d":"img/icon/fog.png","50n":"img/icon/fog.png"};function R(e){return`<img src="${Ue[e]||"img/icon/default.png"}" width="48" height="48" alt="weather icon">`}function He(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function Re(e,t){$e.textContent=`${e.name}, ${e.sys.country}`,qe.textContent=`${Math.round(e.main.temp)}°`,Be.textContent=`${Math.round(e.main.temp_min)}°`,We.textContent=`${Math.round(e.main.temp_max)}°`;const n=e.weather[0].icon;_e.innerHTML=R(n);const r=new Date,o=r.getDate(),s=He(o),c=r.toLocaleDateString("en-US",{weekday:"short"});Ae.innerHTML=`${o}<sup>${s}</sup> <span class="day-of-week">${c}</span>`;const l=r.toLocaleDateString("en-US",{month:"long"});Fe.textContent=l;const i=new Date(e.sys.sunrise*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"}),d=new Date(e.sys.sunset*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"});Oe.innerHTML=`<svg width="24" height="24"><use href="${I}#sunrise"></use></svg>${i}`,Pe.innerHTML=`<svg width="24" height="24"><use href="${I}#sunset"></use></svg>${d}`}async function V(e){const t=await Ie(e);t?(document.body.style.setProperty("--bg-image",`url('${t}')`),document.querySelector(".weather-app").style.backgroundImage=`url('${t}')`):(document.body.style.setProperty("--bg-image","none"),document.querySelector(".weather-app").style.backgroundImage="none")}function _(e,t,n){const r=document.getElementById("city-tags-container"),o=document.getElementById("city-tags-toggle");Array.from(r.querySelectorAll(".city-tag")).forEach(l=>l.remove()),(!r.classList.contains("expanded")&&e.length>4?e.slice(0,4):e).forEach(l=>{const i=document.createElement("span");i.classList.add("city-tag"),i.textContent=l,i.addEventListener("click",()=>t(l));const d=document.createElement("span");d.classList.add("close-tag"),d.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L11 11M1 11L11 1" stroke="white" stroke-opacity="0.5" stroke-width="1.5" /></svg>',d.addEventListener("click",a=>{a.stopPropagation(),n(l)}),i.appendChild(d),r.insertBefore(i,o)}),o&&(e.length>4?(o.classList.remove("hidden"),o.onclick=()=>{r.classList.toggle("expanded"),_(e,t,n)}):(o.classList.add("hidden"),r.classList.remove("expanded")))}function M(e,t){Le[t]({message:e,position:"topRight",timeout:3e3,progressBar:!1,theme:"dark",backgroundColor:t==="error"?"#dc3545":t==="success"?"#28a745":"#ffc107",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff"})}async function N(){const e=await De();e?(G.textContent=e.text,Z.textContent=e.author):(G.textContent="“The only way to do great work is to love what you do.”",Z.textContent="Steve Jobs")}function ce(e){const t={};return e.list.forEach(n=>{const r=n.dt_txt.split(" ")[0];t[r]||(t[r]=[]),t[r].push(n)}),t}function de(e){return Object.keys(e).map(t=>{const n=e[t];if(!n||n.length===0)return null;const r=Math.min(...n.map(a=>a.main.temp_min)),o=Math.max(...n.map(a=>a.main.temp_max)),s=n.reduce((a,u)=>a+u.main.temp,0)/n.length,c=n.reduce((a,u)=>a+u.main.humidity,0)/n.length,l=n.reduce((a,u)=>a+u.wind.speed,0)/n.length,i=n.reduce((a,u)=>a+u.main.pressure,0)/n.length,d=n.find(a=>a.dt_txt.includes("12:00:00"))||n[0];return{date:new Date(t),temp_min:Math.round(r),temp_max:Math.round(o),icon:d.weather[0].icon,avg_temp:parseFloat(s.toFixed(1)),avg_humidity:Math.round(c),avg_wind_speed:parseFloat(l.toFixed(1)),avg_pressure:Math.round(i*.750062)}}).filter(Boolean).slice(0,5)}function Ve(e){const t=document.querySelector(".five-day-forecast-container"),n=document.getElementById("forecast-header-city");if(!t||!n)return;n.textContent=`${e.city.name}, ${e.city.country}`;const r=ce(e),o=de(r),s=Object.keys(r).slice(0,5);t.innerHTML="",o.forEach((c,l)=>{const i=c.date.toLocaleDateString("en-US",{weekday:"long"}),d=c.date.toLocaleDateString("en-US",{day:"numeric",month:"short"}),a=document.createElement("div");a.classList.add("forecast-card"),a.innerHTML=`
      <p class="forecast-day-of-week">${i}</p>
      <p class="forecast-date">${d}</p>
      <div class="forecast-icon">
        ${R(c.icon)}
      </div>
      <div class="forecast-min-max">
        <div>
          <p class="label">min</p>
          <p class="temp-value">${c.temp_min}°</p>
        </div>
        <span class="minmax-divider">
                <svg width="1" height="40">
                  <use href="${I}#vertical-line"></use>
                </svg>
        </span>
        <div>
          <p class="label">max</p>
          <p class="temp-value">${c.temp_max}°</p>
        </div>
      </div>
      <a class="forecast-more-info">more info</a>
    `;const u=a.querySelector(".forecast-more-info"),m=s[l];if(u&&r[m]){u.dataset.dayData=JSON.stringify(r[m]);const C=c.date.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short"});u.dataset.dateString=C}t.appendChild(a)})}function le(e){const t=ce(e),n=de(t),r=n.map(m=>m.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),o={temp:{label:"Temperature, C°",data:n.map(m=>m.avg_temp),borderColor:"#ff6b09",backgroundColor:"#ff6b09",tension:.4},humidity:{label:"Humidity, %",data:n.map(m=>m.avg_humidity),borderColor:"#0000ff",backgroundColor:"#0000ff",tension:.4},wind:{label:"Wind Speed, m/s",data:n.map(m=>m.avg_wind_speed),borderColor:"#e0e024",backgroundColor:"#e0e024",tension:.4},pressure:{label:"Atmosphere Pressure, m/m",data:n.map(m=>m.avg_pressure),borderColor:"#00ff00",backgroundColor:"#00ff00",tension:.4}},c=document.getElementById("chart-legend").querySelectorAll('input[type="checkbox"]:checked'),l=Array.from(c).map(m=>o[m.value]),d=document.getElementById("weather-chart").getContext("2d");O&&O.destroy();const a=window.innerWidth<=767,u={responsive:!0,maintainAspectRatio:!1,scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.54)",font:{size:14,weight:"400"}},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"rgba(255, 255, 255, 0.54)",font:{size:14,weight:"400"}},grid:{color:"rgba(255, 255, 255, 0.1)"},title:{display:!a,text:"Value of Indicators",color:"rgba(255, 255, 255, 0.7)"}}},plugins:{legend:{display:!1}},elements:{point:{radius:4,hoverRadius:6}}};O=new re(d,{type:"line",data:{labels:r,datasets:l},options:u})}function Ne(e){const t=document.getElementById("hourly-forecast-container"),n=t.querySelector(".hourly-forecast-cards-wrapper");if(!t||!n)return;const r=s=>Math.round(s*.750062),o=e.map(s=>{const c=new Date(s.dt*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),l=R(s.weather[0].icon),i=`${Math.round(s.main.temp)}°`,d=r(s.main.pressure),a=s.main.humidity,u=s.wind.speed.toFixed(1);return`
        <div class="hourly-card">
          <p class="hourly-time">${c}</p>
          <div class="hourly-icon">${l}</div>
          <p class="hourly-temp">${i}</p>
          <div class="hourly-details">
            <div class="hourly-details-item">
              <svg><use href="${I}#barometer"></use></svg> 
              <span>${d} mm</span>
            </div>
            <div class="hourly-details-item">
              <svg><use href="${I}#humidity"></use></svg>
              <span>${a}%</span>
            </div>
            <div class="hourly-details-item">
              <svg><use href="${I}#wind"></use></svg>
              <span>${u} m/s</span>
            </div>
          </div>
        </div>
      `}).join("");n.innerHTML=o,n.scrollLeft=0,t.classList.remove("hidden")}function D(){const e=document.getElementById("hourly-forecast-container");if(e){e.classList.add("hidden");const t=e.querySelector(".hourly-forecast-cards-wrapper");t&&(t.innerHTML="")}}const ue=document.querySelector(".weather-app"),P=document.getElementById("city-input"),Xe=document.getElementById("add-city-button"),me=document.getElementById("loader"),he=document.getElementById("today-view-container"),fe=document.getElementById("five-day-view-container"),B=document.getElementById("today-tab-today-view"),$=document.getElementById("5-days-tab-today-view"),X=document.getElementById("today-tab-five-day-view"),j=document.getElementById("5-days-tab-five-day-view"),p=document.getElementById("show-chart-container"),ee=document.getElementById("show-chart-link"),S=document.getElementById("chart-section"),te=document.getElementById("hide-chart-link"),ne=document.getElementById("chart-legend"),oe=document.querySelector(".forecast-main-section");let h=JSON.parse(localStorage.getItem("weatherCities"))||["Kyiv"],v=h[0]||"Kyiv",q=null;function U(e){const{wrapperSelector:t,scrollbarId:n,thumbId:r,scrollbarVisibleWidth:o}=e,s=document.getElementById(n),c=document.getElementById(r),l=document.querySelector(t);if(!s||!c||!l)return;if(s.dataset.customScrollbarInitialized==="true"){setTimeout(a,0);return}s.dataset.customScrollbarInitialized="true";let i=!1,d=0;function a(){if(!l||!c||!s)return;const y=l.scrollWidth,w=l.clientWidth;if(y<=w){s.classList.add("hidden");return}s.classList.remove("hidden");const b=32,g=w/y*o,L=Math.max(g,b),E=o-L;let f=0;y-w>0&&(f=l.scrollLeft/(y-w)*E),f=Math.max(0,Math.min(f,E)),c.setAttribute("x1",String(f)),c.setAttribute("x2",String(f+L))}const u=y=>{y.preventDefault();const w=s.getBoundingClientRect(),b=y.clientX-w.left,g=parseFloat(c.getAttribute("x1"))||0,L=(parseFloat(c.getAttribute("x2"))||0)-g;if(b>=g&&b<=g+L)i=!0,d=b-g,document.body.style.userSelect="none";else{const E=l.scrollWidth,f=l.clientWidth;if(E<=f)return;const A=32,T=f/E*o,x=Math.max(T,A),k=o-x;let F=b-x/2;F=Math.max(0,Math.min(F,k));const we=k>0?F/k:0;l.scrollLeft=we*(E-f),a()}},m=y=>{if(!i)return;const w=s.getBoundingClientRect(),b=y.clientX-w.left,g=l.scrollWidth,L=l.clientWidth;if(g<=L)return;const E=32,f=L/g*o,A=Math.max(f,E),T=o-A;let x=b-d;x=Math.max(0,Math.min(x,T));const k=T>0?x/T:0;l.scrollLeft=k*(g-L)},C=()=>{i&&(i=!1,document.body.style.userSelect="")};s.addEventListener("mousedown",u),document.addEventListener("mousemove",m),document.addEventListener("mouseup",C),l.addEventListener("scroll",a),window.addEventListener("resize",a),setTimeout(a,0)}function J(){me.classList.remove("hidden")}function z(){me.classList.add("hidden")}async function K(e){J();try{const t=await ie(e);t&&Re(t,e)}catch(t){console.error(t)}finally{z()}}async function ge(e){J();try{const t=await Ee(e);t&&(q=t,Ve(t),p&&p.classList.remove("hidden"))}catch{M(`Не вдалося отримати прогноз для міста ${e}.`,"error")}finally{z()}}function Y(){ue.classList.remove("five-day-layout-active"),!B.classList.contains("active")&&(B.classList.add("active"),$.classList.remove("active"),X.classList.add("active"),j.classList.remove("active"),fe.classList.add("hidden"),he.classList.remove("hidden"),D(),K(v),S&&S.classList.add("hidden"),p&&p.classList.add("hidden"),oe&&oe.classList.remove("hidden"))}function pe(){ue.classList.add("five-day-layout-active"),!$.classList.contains("active")&&(B.classList.remove("active"),$.classList.add("active"),X.classList.remove("active"),j.classList.add("active"),he.classList.add("hidden"),fe.classList.remove("hidden"),ge(v))}function je(){if(!q){M("Будь ласка, зачекайте завантаження даних прогнозу.","info");return}p&&p.classList.add("hidden"),D(),S&&S.classList.remove("hidden"),le(q),window.innerWidth<=767&&U({wrapperSelector:"#chart-wrapper",scrollbarId:"chart-custom-scrollbar",thumbId:"chart-scrollbar-thumb",scrollbarVisibleWidth:250})}function H(){S&&S.classList.add("hidden"),p&&p.classList.remove("hidden")}function W(e){v=e,V(e),N(),D(),$.classList.contains("active")?(H(),ge(e)):K(e)}function ye(){const e=P.value.trim();if(!e||e.split(" ").join("").length===0){M("Поле вводу міста не може бути порожнім.","error");return}if(h.some(t=>t.toLowerCase()===e.toLowerCase())){M("Це місто вже додано.","warning");return}h.length>=5&&h.shift(),J(),ie(e).then(t=>{t&&(V(e),h.push(e),localStorage.setItem("weatherCities",JSON.stringify(h)),_(h,W,Q),P.value="",v=e,N(),Y())}).catch(t=>{M(t.message.includes("City not found")?`Місто "${e}" не знайдено.`:`Сталася помилка: ${t.message}`,"error")}).finally(z)}function Q(e){h=h.filter(t=>t.toLowerCase()!==e.toLowerCase()),localStorage.setItem("weatherCities",JSON.stringify(h)),_(h,W,Q),v.toLowerCase()===e.toLowerCase()&&(v=h.length>0?h[0]:"Kyiv",W(v))}B.addEventListener("click",Y);X.addEventListener("click",Y);$.addEventListener("click",pe);j.addEventListener("click",pe);Xe.addEventListener("click",ye);P.addEventListener("keypress",e=>{e.key==="Enter"&&ye()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".date-time-info .time");_(h,W,Q),V(v),K(v),N(),e&&setInterval(()=>{const i=new Date;e.textContent=i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"})},1e3);const t=document.querySelector(".forecast-scroll-arrow.left"),n=document.querySelector(".forecast-scroll-arrow.right"),r=document.querySelector(".five-day-forecast-container");t&&t.addEventListener("click",()=>o("left")),n&&n.addEventListener("click",()=>o("right"));function o(i){if(!r)return;const d=r.querySelector(".forecast-card");if(!d)return;const a=d.offsetWidth+10;r.scrollBy({left:i==="left"?-a:a,behavior:"smooth"})}const s=document.querySelector(".five-day-forecast-container");let c=null;function l(){if(c){c.classList.remove("active");const i=c.closest(".forecast-card");if(i){const d=i.querySelector(".forecast-day-of-week");d&&d.classList.remove("active")}c=null}}if(s&&s.addEventListener("click",i=>{const d=i.target.closest(".forecast-more-info");if(!d)return;i.preventDefault(),H();const a=d.closest(".forecast-card");if(c===d){D(),l();return}l(),d.classList.add("active"),a&&a.querySelector(".forecast-day-of-week").classList.add("active"),c=d;const u=JSON.parse(d.dataset.dayData);Ne(u,d.dataset.dateString),setTimeout(()=>{U({wrapperSelector:"#hourly-forecast-container .hourly-forecast-cards-wrapper",scrollbarId:"hourly-custom-scrollbar",thumbId:"hourly-scrollbar-thumb",scrollbarVisibleWidth:248})},0)}),ee&&ee.addEventListener("click",i=>{i.preventDefault(),D(),l(),je(),U({wrapperSelector:"#chart-wrapper",scrollbarId:"chart-custom-scrollbar",thumbId:"chart-scrollbar-thumb",scrollbarVisibleWidth:250})}),te&&te.addEventListener("click",i=>{i.preventDefault(),l(),H()}),ne){const i=ne.querySelectorAll('input[type="checkbox"]'),d=()=>{i.forEach(a=>{const u=a.closest(".chart-legend-item");u&&(a.checked?u.classList.remove("disabled"):u.classList.add("disabled"))})};i.forEach(a=>{a.addEventListener("change",u=>{const m=u.target;if(!m.checked){m.checked=!0;return}i.forEach(C=>{C!==m&&(C.checked=!1)}),d(),q&&S&&S.style.display!=="none"&&le(q)})}),d()}p&&p.classList.add("hidden")});function ve(){const e=document.getElementById("forecast-header-city"),t=document.querySelector(".five-day-forecast-wrapper"),n=document.querySelector(".five-day-header");!e||!t||!n||(window.innerWidth<=767?t.firstElementChild!==e&&t.insertBefore(e,t.firstChild):n.contains(e)||n.insertBefore(e,n.firstChild))}window.addEventListener("DOMContentLoaded",ve);window.addEventListener("resize",ve);
